FROM python:3.12-slim

WORKDIR /app

RUN pip install --no-cache-dir grpcio grpcio-tools clickhouse-driver

COPY libs/onetake_proto libs/onetake_proto
COPY services/reco_service services/reco_service

ENV PYTHONPATH=/app:/app/libs/onetake_proto

CMD ["python", "-m", "services.reco_service.main"]
